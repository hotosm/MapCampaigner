{% extends 'new_base.html' %}

{% block title %} Home {% endblock %}

{% block content %}

    <div class="row">
        <div class="col-lg-8">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <i class="fa fa-map-o" aria-hidden="true"></i> Campaign Map
                    <div class="pull-right">
                        <div class="btn-group">
                            <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                                Actions
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu pull-right" role="menu">
                                <li><a href="#">Action</a>
                                </li>
                                <li><a href="#">Another action</a>
                                </li>
                                <li><a href="#">Something else here</a>
                                </li>
                                <li class="divider"></li>
                                <li><a href="#">Separated link</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="panel-body">
                    <div id="campaign-map"></div>
                </div>
            </div>
        </div>

        <div class="col-lg-4">

                <button id="create-campaign" type="button" class="btn btn-outline btn-primary btn-lg btn-block">
                    <i class="fa fa-plus" aria-hidden="true"></i>
                    <span style="margin-left: 5px;">Create New Campaign</span>
                </button>

            <div class="panel panel-default" style="margin-top: 20px;">
                <div class="panel-heading">
                    <i class="fa fa-list-ul" aria-hidden="true"></i> Campaigns
                </div>
                {% for campaign in campaigns %}
                    <div class="panel-body">
                        <div class="panel panel-primary">
                            <div class="panel-heading">
                                <h4>{{ campaign.name }}</h4>
                                <p style="font-size: 9pt;">{{ campaign.description }}</p>
                            </div>
                            <a href="/campaign_manager/campaign/{{ campaign.uuid }}">
                                <div class="panel-footer">
                                    <span class="pull-left">Manage</span>
                                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                                    <div class="clearfix"></div>
                                </div>
                            </a>
                        </div>
                    </div>
                {% endfor %}
            </div>


        </div>

    </div>

{% endblock %}

{% block before_base_js %}

    <script type="text/javascript">

    var map = L.map('campaign-map').setView([0, 0], 1);
    L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Â© <a href="http://www.openstreetmap.org" target="_parent">OpenStreetMap</a> and contributors, ' +
        'under an <a href="http://www.openstreetmap.org/copyright" target="_parent">open license</a>',
        maxZoom: 15
    }).addTo(map);

    $('#create-campaign').click(function () {
        if (window.isAuthenticated) {
            location.href='create';
        } else {
            showNotifications('You need to login first.', 'danger');
        }
    });

    </script>

{% endblock %}